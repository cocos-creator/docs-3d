
## 外部代码支持

### 插件脚本

当脚本资源在导入时设置了“导入为插件”，此脚本资源便称为 **插件脚本**。插件脚本通常用于引入第三方库。目前仅支持 JavaScript 插件脚本。

与项目中的其它脚本不同，Creator 3D 不会修改插件脚本的内容，但可能会插入一些代码，以适配 Creator 3D 本身；特别地，Creator 3D 将屏蔽全局变量 `module`、`exports`、`define`。

#### 可用性与跨平台

插件脚本几乎会原封不动的拷贝至构建目录，因此插件脚本的可用性与跨平台性不受 Creator 3D 保障。
例如，当插件脚本使用了某些平台不支持的语言特性时将导致错误。

#### 交互

插件脚本与非插件脚本无法以导入形式交互。举例来说，即使开发者悉知其目标平台实际支持 CommonJS，
也不能在非插件脚本中强行通过 `require` 相对路径进行使用。

因此，插件脚本一般以全局变量的方式（又称 IIFE 模块格式）来通讯。

#### 导入选项

许多第三方 JavaScript 库以全局变量的方式提供库的功能，这些库往往会写入全局变量 `window`、`global`、`self` 和 `this` 中。
但这些全局变量不一定是跨平台的。为了方便，在导入插件脚本时，提供了选项 “**模拟全局变量**”，开启后，Creator 3D 将插入必要的代码
以模拟这些全局变量，其效果类似于：
```js
(function() {
    const window = globalThis;
    const global = globalThis;
    const self = globalThis;

    (function() {
        /* 原始代码 */
    }).call(this);

}).call(this);
```
