# 骨骼贴图布局设置

要确保[骨骼动画](../../engine/animation/skeletal-animation.md#关于动态-Instancing)也能够完全正确地参与[动态 Instancing](../../engine/renderable/model-component.md#Instancing-合批)，需要用户手动指定每张骨骼贴图的数据分配方式。

比如一个场景中要绘制大量相同的人物角色，每个角色可能在走，可能在坐着，可能在睡觉。如果希望能够一个 drawcall 能正确完成所有角色的绘制，一个重要的前提条件是，这三个动画的数据都储存在同一张骨骼贴图内。目前在默认的[预烘焙骨骼动画模式](../../engine/animation/skeletal-animation.md#预烘焙骨骼动画系统)下，骨骼贴图已经做到全局自动复用，但每张贴图的大小和它们各储存哪些动画是不可预知的。如果不做任何处理直接开启蒙皮模型的 instancing 的话，体现在最终的运行时效果就是，有的动画效果正确，有的动画效果完全错乱，并且完全无法预测。因此我们引入骨骼贴图布局设置面板，用于手动指定每张骨骼贴图里，要存储哪些骨骼的哪些动画信息。

> 注意：骨骼贴图布局设置面板提供的，本质上是运行时的“内存分配指导规则”。对于指定的骨骼和动画资源，会保证按照指定规则分配，但如果运行时用到了并未指定规则的资源，还是会回到全局复用的自动分配模式上去。

下面我们以 xxx 为例，展示设置流程。
(这最好找一个动画比较多的资源，然后先展示啥也不设置直接开 instancing，效果不对的样子，再到面板里来设置，这样才能把重要性和存在意义完全说明白。)
